{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lysco\\\\fso_projects\\\\fso_phonebook\\\\ui\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport Form from \"./components/form\";\nimport Search from \"./components/search\";\nimport Persons from \"./components/persons\";\nimport Notification from \"./components/notification\";\nimport personService from \"./services/persons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [filteredPersons, setFilteredPersons] = useState(persons);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [error, setError] = useState(false);\n  const [single, setSingle] = useState([]);\n  useEffect(() => {\n    personService.getAll().then(response => setPersons(response));\n    axios.get(\"http://localhost:3001/api/persons/2\").then(response => setSingle(response.data));\n  }, []);\n  useEffect(() => {\n    setFilteredPersons(persons);\n  }, [persons]);\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    let isNewName = persons.find(person => newName === person.name);\n    const changedPerson = { ...isNewName,\n      number: newNumber\n    };\n\n    if (isNewName) {\n      let result = window.confirm(`${isNewName.name} already in phone book, replace number?`);\n\n      if (result) {\n        personService.update(changedPerson).catch(error => {\n          setError(\"updateFailed\");\n          setTimeout(() => {\n            setError(false);\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setSearch(\"\");\n          }, 1000);\n          return;\n        });\n        let addPerson = persons.map(person => person.id === isNewName.id ? changedPerson : person);\n        setPersons(addPerson);\n        setError(\"update\");\n        setTimeout(() => {\n          setError(false);\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setSearch(\"\");\n        }, 1000);\n        return;\n      }\n\n      setNewName(\"\");\n      setNewNumber(\"\");\n      setSearch(\"\");\n      return;\n    }\n\n    const newObject = {\n      name: newName,\n      number: newNumber\n    };\n    personService.create(newObject).then(response => setPersons(persons.concat(response)));\n    setError(\"update\");\n    setTimeout(() => {\n      setError(false);\n      setNewName(\"\");\n      setNewNumber(\"\");\n      setSearch(\"\");\n    }, 1000);\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearch = event => {\n    setSearch(event.target.value);\n  };\n\n  const handleRemove = id => {\n    personService.remove(id).catch(error => {\n      setError(\"removeError\");\n      setTimeout(() => {\n        setError(false);\n      }, 1000);\n    });\n    const newPersons = persons.filter(person => person.id !== id);\n    setPersons(newPersons);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: single.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), error ? /*#__PURE__*/_jsxDEV(Notification, {\n      error: error,\n      newName: newName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 16\n    }, this) : null, /*#__PURE__*/_jsxDEV(Search, {\n      handleSearch: handleSearch,\n      search: search\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      handleNumberChange: handleNumberChange,\n      handleNameChange: handleNameChange,\n      newName: newName,\n      newNumber: newNumber,\n      handleSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      filteredPersons: filteredPersons,\n      handleRemove: handleRemove\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"PScBn4/WeFUEhlqnSr93U5rG6UY=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/lysco/fso_projects/fso_phonebook/ui/src/App.js"],"names":["useEffect","useState","axios","Form","Search","Persons","Notification","personService","App","persons","setPersons","filteredPersons","setFilteredPersons","newName","setNewName","newNumber","setNewNumber","search","setSearch","error","setError","single","setSingle","getAll","then","response","get","data","handleSubmit","event","preventDefault","isNewName","find","person","name","changedPerson","number","result","window","confirm","update","catch","setTimeout","addPerson","map","id","newObject","create","concat","handleNameChange","target","value","handleNumberChange","handleSearch","handleRemove","remove","newPersons","filter"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport Form from \"./components/form\";\r\nimport Search from \"./components/search\";\r\nimport Persons from \"./components/persons\";\r\nimport Notification from \"./components/notification\";\r\n\r\nimport personService from \"./services/persons\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [filteredPersons, setFilteredPersons] = useState(persons);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [single, setSingle] = useState([]);\r\n  useEffect(() => {\r\n    personService.getAll().then((response) => setPersons(response));\r\n\r\n    axios\r\n      .get(\"http://localhost:3001/api/persons/2\")\r\n      .then((response) => setSingle(response.data));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilteredPersons(persons);\r\n  }, [persons]);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    let isNewName = persons.find((person) => newName === person.name);\r\n    const changedPerson = { ...isNewName, number: newNumber };\r\n\r\n    if (isNewName) {\r\n      let result = window.confirm(\r\n        `${isNewName.name} already in phone book, replace number?`\r\n      );\r\n      if (result) {\r\n        personService.update(changedPerson).catch((error) => {\r\n          setError(\"updateFailed\");\r\n          setTimeout(() => {\r\n            setError(false);\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n            setSearch(\"\");\r\n          }, 1000);\r\n          return;\r\n        });\r\n\r\n        let addPerson = persons.map((person) =>\r\n          person.id === isNewName.id ? changedPerson : person\r\n        );\r\n\r\n        setPersons(addPerson);\r\n        setError(\"update\");\r\n        setTimeout(() => {\r\n          setError(false);\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n          setSearch(\"\");\r\n        }, 1000);\r\n\r\n        return;\r\n      }\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setSearch(\"\");\r\n      return;\r\n    }\r\n\r\n    const newObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    personService\r\n      .create(newObject)\r\n      .then((response) => setPersons(persons.concat(response)));\r\n\r\n    setError(\"update\");\r\n    setTimeout(() => {\r\n      setError(false);\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setSearch(\"\");\r\n    }, 1000);\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearch(event.target.value);\r\n  };\r\n\r\n  const handleRemove = (id) => {\r\n    personService.remove(id).catch((error) => {\r\n      setError(\"removeError\");\r\n      setTimeout(() => {\r\n        setError(false);\r\n      }, 1000);\r\n    });\r\n    const newPersons = persons.filter((person) => person.id !== id);\r\n    setPersons(newPersons);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div>{single.name}</div>\r\n      <h2>Phonebook</h2>\r\n      {error ? <Notification error={error} newName={newName} /> : null}\r\n      <Search handleSearch={handleSearch} search={search} />\r\n      <h2>Add a new</h2>\r\n      <Form\r\n        handleNumberChange={handleNumberChange}\r\n        handleNameChange={handleNameChange}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleSubmit={handleSubmit}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons filteredPersons={filteredPersons} handleRemove={handleRemove} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}