{"ast":null,"code":"import _objectSpread from\"C:/Users/lysco/fso_projects/fso_phonebook/ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/lysco/fso_projects/fso_phonebook/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lysco/fso_projects/fso_phonebook/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\lysco\\\\fso_projects\\\\fso_phonebook\\\\ui\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useState}from\"react\";import Form from\"./components/form\";import Search from\"./components/search\";import Persons from\"./components/persons\";import Notification from\"./components/notification\";import personService from\"./services/persons\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];useEffect(function(){var getPersons=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://stark-ridge-32063.herokuapp.com/api/persons\").then(function(response){return setPersons(response.data);});case 2:case\"end\":return _context.stop();}}},_callee);}));return function getPersons(){return _ref.apply(this,arguments);};}();getPersons();// personService.getAll().then((response) => setPersons(response));\n},[]);var filteredPersons=persons.filter(function(person){return person.name.toLowerCase().includes(search.toLowerCase());});var handleSubmit=function handleSubmit(event){event.preventDefault();var isNewName=persons.find(function(person){return newName===person.name;});var changedPerson=_objectSpread(_objectSpread({},isNewName),{},{number:newNumber});if(isNewName){var result=window.confirm(\"\".concat(isNewName.name,\" already in phone book, replace number?\"));if(result){personService.update(changedPerson).catch(function(error){setError(\"updateFailed\");setTimeout(function(){setError(false);setNewName(\"\");setNewNumber(\"\");setSearch(\"\");},1000);return;});var addPerson=persons.map(function(person){return person.id===isNewName.id?changedPerson:person;});setPersons(addPerson);setError(\"update\");setTimeout(function(){setError(false);setNewName(\"\");setNewNumber(\"\");setSearch(\"\");},1000);return;}setNewName(\"\");setNewNumber(\"\");setSearch(\"\");return;}var newObject={name:newName,number:newNumber};personService.create(newObject).then(function(response){return setPersons(persons.concat(response));});setError(\"update\");setTimeout(function(){setError(false);setNewName(\"\");setNewNumber(\"\");setSearch(\"\");},1000);};var handleNameChange=function handleNameChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};var handleSearch=function handleSearch(event){setSearch(event.target.value);};var handleRemove=function handleRemove(id){personService.remove(id).catch(function(error){setError(\"removeError\");setTimeout(function(){setError(false);},1000);});var newPersons=persons.filter(function(person){return person.id!==id;});setPersons(newPersons);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),error?/*#__PURE__*/_jsx(Notification,{error:error,newName:newName}):null,/*#__PURE__*/_jsx(Search,{handleSearch:handleSearch,search:search}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(Form,{handleNumberChange:handleNumberChange,handleNameChange:handleNameChange,newName:newName,newNumber:newNumber,handleSubmit:handleSubmit}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{filteredPersons:filteredPersons,handleRemove:handleRemove})]});};export default App;","map":{"version":3,"sources":["C:/Users/lysco/fso_projects/fso_phonebook/ui/src/App.js"],"names":["useEffect","useState","Form","Search","Persons","Notification","personService","axios","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","search","setSearch","error","setError","getPersons","get","then","response","data","filteredPersons","filter","person","name","toLowerCase","includes","handleSubmit","event","preventDefault","isNewName","find","changedPerson","number","result","window","confirm","update","catch","setTimeout","addPerson","map","id","newObject","create","concat","handleNameChange","target","value","handleNumberChange","handleSearch","handleRemove","remove","newPersons"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nimport Form from \"./components/form\";\r\nimport Search from \"./components/search\";\r\nimport Persons from \"./components/persons\";\r\nimport Notification from \"./components/notification\";\r\n\r\nimport personService from \"./services/persons\";\r\nimport axios from \"axios\";\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let getPersons = async () => {\r\n      await axios\r\n        .get(\"https://stark-ridge-32063.herokuapp.com/api/persons\")\r\n        .then((response) => setPersons(response.data));\r\n    };\r\n    getPersons();\r\n    // personService.getAll().then((response) => setPersons(response));\r\n  }, []);\r\n\r\n  let filteredPersons = persons.filter((person) =>\r\n    person.name.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    let isNewName = persons.find((person) => newName === person.name);\r\n    const changedPerson = { ...isNewName, number: newNumber };\r\n\r\n    if (isNewName) {\r\n      let result = window.confirm(\r\n        `${isNewName.name} already in phone book, replace number?`\r\n      );\r\n      if (result) {\r\n        personService.update(changedPerson).catch((error) => {\r\n          setError(\"updateFailed\");\r\n          setTimeout(() => {\r\n            setError(false);\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n            setSearch(\"\");\r\n          }, 1000);\r\n          return;\r\n        });\r\n\r\n        let addPerson = persons.map((person) =>\r\n          person.id === isNewName.id ? changedPerson : person\r\n        );\r\n\r\n        setPersons(addPerson);\r\n        setError(\"update\");\r\n        setTimeout(() => {\r\n          setError(false);\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n          setSearch(\"\");\r\n        }, 1000);\r\n\r\n        return;\r\n      }\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setSearch(\"\");\r\n      return;\r\n    }\r\n\r\n    const newObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    personService\r\n      .create(newObject)\r\n      .then((response) => setPersons(persons.concat(response)));\r\n\r\n    setError(\"update\");\r\n    setTimeout(() => {\r\n      setError(false);\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setSearch(\"\");\r\n    }, 1000);\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearch(event.target.value);\r\n  };\r\n\r\n  const handleRemove = (id) => {\r\n    personService.remove(id).catch((error) => {\r\n      setError(\"removeError\");\r\n      setTimeout(() => {\r\n        setError(false);\r\n      }, 1000);\r\n    });\r\n    const newPersons = persons.filter((person) => person.id !== id);\r\n    setPersons(newPersons);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      {error ? <Notification error={error} newName={newName} /> : null}\r\n      <Search handleSearch={handleSearch} search={search} />\r\n      <h2>Add a new</h2>\r\n      <Form\r\n        handleNumberChange={handleNumberChange}\r\n        handleNameChange={handleNameChange}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleSubmit={handleSubmit}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons filteredPersons={filteredPersons} handleRemove={handleRemove} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}