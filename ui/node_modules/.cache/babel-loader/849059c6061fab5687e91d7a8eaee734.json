{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lysco\\\\fso_projects\\\\fso_phonebook\\\\ui\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport Form from \"./components/form\";\nimport Search from \"./components/search\";\nimport Persons from \"./components/persons\";\nimport Notification from \"./components/notification\";\nimport personService from \"./services/persons\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [search, setSearch] = useState(\"\");\n  const [error, setError] = useState(false);\n  useEffect(() => {\n    console.log(persons);\n    personService.getAll().then(response => setPersons(response));\n  }, []);\n  let filteredPersons = persons.filter(person => person.name.toLowerCase().includes(search.toLowerCase()));\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    let isNewName = persons.find(person => newName === person.name);\n    const changedPerson = { ...isNewName,\n      number: newNumber\n    };\n\n    if (isNewName) {\n      let result = window.confirm(`${isNewName.name} already in phone book, replace number?`);\n\n      if (result) {\n        personService.update(changedPerson).catch(error => {\n          setError(\"updateFailed\");\n          setTimeout(() => {\n            setError(false);\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setSearch(\"\");\n          }, 1000);\n          return;\n        });\n        let addPerson = persons.map(person => person.id === isNewName.id ? changedPerson : person);\n        setPersons(addPerson);\n        setError(\"update\");\n        setTimeout(() => {\n          setError(false);\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setSearch(\"\");\n        }, 1000);\n        return;\n      }\n\n      setNewName(\"\");\n      setNewNumber(\"\");\n      setSearch(\"\");\n      return;\n    }\n\n    const newObject = {\n      name: newName,\n      number: newNumber\n    };\n    personService.create(newObject).then(response => setPersons(persons.concat(response)));\n    setError(\"update\");\n    setTimeout(() => {\n      setError(false);\n      setNewName(\"\");\n      setNewNumber(\"\");\n      setSearch(\"\");\n    }, 1000);\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearch = event => {\n    setSearch(event.target.value);\n  };\n\n  const handleRemove = id => {\n    personService.remove(id).catch(error => {\n      setError(\"removeError\");\n      setTimeout(() => {\n        setError(false);\n      }, 1000);\n    });\n    const newPersons = persons.filter(person => person.id !== id);\n    setPersons(newPersons);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), error ? /*#__PURE__*/_jsxDEV(Notification, {\n      error: error,\n      newName: newName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 16\n    }, this) : null, /*#__PURE__*/_jsxDEV(Search, {\n      handleSearch: handleSearch,\n      search: search\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      handleNumberChange: handleNumberChange,\n      handleNameChange: handleNameChange,\n      newName: newName,\n      newNumber: newNumber,\n      handleSubmit: handleSubmit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      filteredPersons: filteredPersons,\n      handleRemove: handleRemove\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"U0JgckI+388KH1vD6mRGhgA4m80=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/lysco/fso_projects/fso_phonebook/ui/src/App.js"],"names":["useEffect","useState","Form","Search","Persons","Notification","personService","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","search","setSearch","error","setError","console","log","getAll","then","response","filteredPersons","filter","person","name","toLowerCase","includes","handleSubmit","event","preventDefault","isNewName","find","changedPerson","number","result","window","confirm","update","catch","setTimeout","addPerson","map","id","newObject","create","concat","handleNameChange","target","value","handleNumberChange","handleSearch","handleRemove","remove","newPersons"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nimport Form from \"./components/form\";\r\nimport Search from \"./components/search\";\r\nimport Persons from \"./components/persons\";\r\nimport Notification from \"./components/notification\";\r\n\r\nimport personService from \"./services/persons\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [search, setSearch] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(persons);\r\n    personService.getAll().then((response) => setPersons(response));\r\n  }, []);\r\n\r\n  let filteredPersons = persons.filter((person) =>\r\n    person.name.toLowerCase().includes(search.toLowerCase())\r\n  );\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    let isNewName = persons.find((person) => newName === person.name);\r\n    const changedPerson = { ...isNewName, number: newNumber };\r\n\r\n    if (isNewName) {\r\n      let result = window.confirm(\r\n        `${isNewName.name} already in phone book, replace number?`\r\n      );\r\n      if (result) {\r\n        personService.update(changedPerson).catch((error) => {\r\n          setError(\"updateFailed\");\r\n          setTimeout(() => {\r\n            setError(false);\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n            setSearch(\"\");\r\n          }, 1000);\r\n          return;\r\n        });\r\n\r\n        let addPerson = persons.map((person) =>\r\n          person.id === isNewName.id ? changedPerson : person\r\n        );\r\n\r\n        setPersons(addPerson);\r\n        setError(\"update\");\r\n        setTimeout(() => {\r\n          setError(false);\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n          setSearch(\"\");\r\n        }, 1000);\r\n\r\n        return;\r\n      }\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setSearch(\"\");\r\n      return;\r\n    }\r\n\r\n    const newObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    personService\r\n      .create(newObject)\r\n      .then((response) => setPersons(persons.concat(response)));\r\n\r\n    setError(\"update\");\r\n    setTimeout(() => {\r\n      setError(false);\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      setSearch(\"\");\r\n    }, 1000);\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    setSearch(event.target.value);\r\n  };\r\n\r\n  const handleRemove = (id) => {\r\n    personService.remove(id).catch((error) => {\r\n      setError(\"removeError\");\r\n      setTimeout(() => {\r\n        setError(false);\r\n      }, 1000);\r\n    });\r\n    const newPersons = persons.filter((person) => person.id !== id);\r\n    setPersons(newPersons);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      {error ? <Notification error={error} newName={newName} /> : null}\r\n      <Search handleSearch={handleSearch} search={search} />\r\n      <h2>Add a new</h2>\r\n      <Form\r\n        handleNumberChange={handleNumberChange}\r\n        handleNameChange={handleNameChange}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleSubmit={handleSubmit}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons filteredPersons={filteredPersons} handleRemove={handleRemove} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}